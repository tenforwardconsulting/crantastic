<%= form_for(@user) do |f| -%>
  <% if @user.errors.any? %>
    <ul>
      <% @user.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  <% end %>

  <p><label for="user_login">User name</label>
  <%= f.text_field :login %></p>

  <p><label for="user_email">Email</label>
  <%= f.text_field :email %></p>

  <p><label for="user_password">Password</label>
  <%= f.password_field :password %></p>

  <p><label for="user_password_confirmation">Confirm password</label>
  <%= f.password_field(:password_confirmation) %></p>

  <% unless @user.new_record? -%>
    <p>
    <label for="user_homepage">Homepage</label>
    <%= f.text_field :homepage, :value => (@user.homepage.blank? ? "http://" : @user.homepage) %>
    </p>
    <p>
    <label for="user_profile">Profile</label>
    <small>(<%= link_to "Markdown", "http://daringfireball.net/projects/markdown/" %> enabled)</small>
    <%= f.text_area :profile %>
    </p>
  <% end -%>

  <p><label for="user_remember">Remember me</label>
  <%= f.check_box :remember %>
  <em>Automatically login in the future; not for shared computers!</em></p>

  <p>
  <label for="user_tos">My contributed texts (package reviews, etc) will be
    available under Creative Commons Attribution 3.0 except private data
    (password, email address)</label>
  <%= f.check_box :tos %>
  <em>You must accept the license terms.</em>
  </p>

  <%= hidden_field_tag 'show_rpx', params[:show_rpx] %>
  <p><%= f.submit(@user.new_record? ? 'Sign up' : 'Save details') %></p>
<% end -%>
